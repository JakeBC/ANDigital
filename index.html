<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">


<html>
<head>
  <title>Places Finder</title>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" id="jquery"></script>
  <script type="text/javascript">
  
  // Info needed for the foursquare request - not sure the secret should be hard coded like this???
  var config = {
    clientID: 'KQAJGIJZEEHA5YT1U212K3Q3PYZVBMUD2Z5BJQLEQMTGSG4B',
	clientSecret: 'WJY00GOCGS45REOKJHCEJT5WHLQ1KLL0GGLPSYASY32Y2GA5',
  };
  
  var returnedData;
  
  // Get the JSON response with the venues data
  $(document).ready(function(){
    $("button").click(function(){
	
	  var url = 'https://api.foursquare.com/v2/venues/search' +
			'?client_id=' + config.clientID +
			'&client_secret=' + config.clientSecret +
			'&v=20130815' +
			'&near=' + document.getElementById('place').value;
			
      $.get(url, function(data){
	    returnedData = data;
		displayResults(data);
      });
    });
  });
  
  function displayResults(data) {
    if (data !== undefined) {
      var resultsList = document.getElementById('results');
	  resultsList.innerHTML = "";
	  
      for (var item in data.response.venues) {
        // get the info from each venue and display it - just list it for now
		var venue = data.response.venues[item];
		var name = venue.name;
		var address = venue.location.address;
		
		var elem = document.createElement('li');
		elem.innerHTML = name + ', ' + address;
		
		resultsList.appendChild(elem);
      }
	}
  }
  
  </script>
</head>
<body>
  <div>
    <pre>Where would you like to go?</pre>
    <input id="place"></input>
	<button>GO!</button>
  </div>
  <ul id="results">
  </ul>
</body>